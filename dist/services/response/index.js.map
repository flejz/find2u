{"version":3,"sources":["../../../src/services/response/index.js"],"names":["success","res","status","entity","json","notFound","end","authorOrAdmin","user","userField","isAdmin","role","isAuthor","equals","id"],"mappings":";;;;;AAAO,IAAMA,4BAAU,SAAVA,OAAU,CAACC,GAAD,EAAMC,MAAN;AAAA,SAAiB,UAACC,MAAD,EAAY;AAClD,QAAIA,MAAJ,EAAY;AACVF,UAAIC,MAAJ,CAAWA,UAAU,GAArB,EAA0BE,IAA1B,CAA+BD,MAA/B;AACD;AACD,WAAO,IAAP;AACD,GALsB;AAAA,CAAhB;;AAOA,IAAME,8BAAW,SAAXA,QAAW,CAACJ,GAAD;AAAA,SAAS,UAACE,MAAD,EAAY;AAC3C,QAAIA,MAAJ,EAAY;AACV,aAAOA,MAAP;AACD;AACDF,QAAIC,MAAJ,CAAW,GAAX,EAAgBI,GAAhB;AACA,WAAO,IAAP;AACD,GANuB;AAAA,CAAjB;;AAQA,IAAMC,wCAAgB,SAAhBA,aAAgB,CAACN,GAAD,EAAMO,IAAN,EAAYC,SAAZ;AAAA,SAA0B,UAACN,MAAD,EAAY;AACjE,QAAIA,MAAJ,EAAY;AACV,UAAMO,UAAUF,KAAKG,IAAL,KAAc,OAA9B;AACA,UAAMC,WAAWT,OAAOM,SAAP,KAAqBN,OAAOM,SAAP,EAAkBI,MAAlB,CAAyBL,KAAKM,EAA9B,CAAtC;AACA,UAAIF,YAAYF,OAAhB,EAAyB;AACvB,eAAOP,MAAP;AACD;AACDF,UAAIC,MAAJ,CAAW,GAAX,EAAgBI,GAAhB;AACD;AACD,WAAO,IAAP;AACD,GAV4B;AAAA,CAAtB","file":"index.js","sourcesContent":["export const success = (res, status) => (entity) => {\n  if (entity) {\n    res.status(status || 200).json(entity)\n  }\n  return null\n}\n\nexport const notFound = (res) => (entity) => {\n  if (entity) {\n    return entity\n  }\n  res.status(404).end()\n  return null\n}\n\nexport const authorOrAdmin = (res, user, userField) => (entity) => {\n  if (entity) {\n    const isAdmin = user.role === 'admin'\n    const isAuthor = entity[userField] && entity[userField].equals(user.id)\n    if (isAuthor || isAdmin) {\n      return entity\n    }\n    res.status(401).end()\n  }\n  return null\n}\n"]}