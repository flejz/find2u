{"version":3,"sources":["../../../src/api/disappeared/controller.js"],"names":["create","res","next","user","body","bodymen","console","log","then","disappeared","view","catch","index","querymen","query","select","cursor","find","populate","disappeareds","map","show","params","findById","id","update","merge","save","destroy","remove"],"mappings":"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","file":"controller.js","sourcesContent":["import _ from 'lodash'\nimport { success, notFound, authorOrAdmin } from '../../services/response/'\nimport { Disappeared } from '.'\n\nexport const create = ({ user, bodymen: { body } }, res, next) => {\n\n  console.log(body)\n\n  return Disappeared.create({ ...body, user })\n    .then((disappeared) => disappeared.view(true))\n    .then(success(res, 201))\n    .catch(next)\n}\n\nexport const index = ({ querymen: { query, select, cursor } }, res, next) =>\n  Disappeared.find(query, select, cursor)\n    .populate('user')\n    .then((disappeareds) => disappeareds.map((disappeared) => disappeared.view()))\n    .then(success(res))\n    .catch(next)\n\nexport const show = ({ params }, res, next) =>\n  Disappeared.findById(params.id)\n    .populate('user')\n    .then(notFound(res))\n    .then((disappeared) => disappeared ? disappeared.view() : null)\n    .then(success(res))\n    .catch(next)\n\nexport const update = ({ user, bodymen: { body }, params }, res, next) =>\n  Disappeared.findById(params.id)\n    .populate('user')\n    .then(notFound(res))\n    .then(authorOrAdmin(res, user, 'user'))\n    .then((disappeared) => disappeared ? _.merge(disappeared, body).save() : null)\n    .then((disappeared) => disappeared ? disappeared.view(true) : null)\n    .then(success(res))\n    .catch(next)\n\nexport const destroy = ({ user, params }, res, next) =>\n  Disappeared.findById(params.id)\n    .then(notFound(res))\n    .then(authorOrAdmin(res, user, 'user'))\n    .then((disappeared) => disappeared ? disappeared.remove() : null)\n    .then(success(res, 204))\n    .catch(next)\n"]}